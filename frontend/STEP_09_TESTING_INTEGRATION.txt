STEP 9: TESTING THE INTEGRATION
================================

Prerequisites:
--------------
1. MongoDB installed and running
2. Backend server running on port 5000
3. Frontend dev server running on port 5173
4. Environment variables configured

Starting the Backend:
---------------------

1. Open terminal in backend directory
   cd d:\newDayRealty\backend

2. Install dependencies (if not done)
   npm install

3. Start MongoDB (if not running)
   - Windows: MongoDB should be running as a service
   - Or manually: mongod

4. Start backend server
   npm run dev

   Expected output:
   âœ… MongoDB Connected: mongodb://localhost:27017/newdayrealty
   ðŸš€ Server running on port 5000 in development mode

Starting the Frontend:
----------------------

1. Open new terminal in frontend directory
   cd d:\newDayRealty\frontend

2. Install dependencies (if not done)
   npm install

3. Start frontend dev server
   npm run dev

   Expected output:
   VITE v5.x.x  ready in xxx ms
   âžœ  Local:   http://localhost:5173/
   âžœ  Network: use --host to expose

Testing Authentication:
-----------------------

1. Open browser: http://localhost:5173/login

2. Test Registration:
   - Click "Create Account"
   - Fill in details:
     * Name: Test User
     * Email: test@example.com
     * Password: password123
     * Confirm Password: password123
     * Role: User
   - Click "Create Account"
   - Should redirect to /dashboard
   - Check browser console for any errors

3. Test Login:
   - Logout from dashboard
   - Go to /login
   - Enter credentials:
     * Email: test@example.com
     * Password: password123
   - Click "Sign In"
   - Should redirect to /dashboard

4. Test Admin Access:
   - Register new user with role: Admin
   - Login with admin credentials
   - Should redirect to /admin
   - Verify admin dashboard loads

Testing Contact Form:
---------------------

1. Navigate to: http://localhost:5173/contact

2. Fill out form:
   - Name: John Doe
   - Email: john@example.com
   - Phone: +977 9841234567
   - Subject: Property Inquiry
   - Message: I am interested in...

3. Click "Send Message"

4. Verify:
   - Success message appears
   - Form clears
   - Check backend terminal for POST /api/contact
   - Check MongoDB for new contact entry

Testing Properties:
-------------------

1. Navigate to: http://localhost:5173/properties

2. View properties (should load from backend)

3. Login as user

4. Try to create property (future feature)

5. Login as admin

6. Approve properties (future feature)

Checking Backend Logs:
----------------------

Backend terminal should show:
- POST /api/auth/register 201
- POST /api/auth/login 200
- GET /api/auth/me 200
- POST /api/contact 201
- GET /api/properties 200

Browser Console Checks:
-----------------------

1. Open DevTools (F12)
2. Check Console tab for errors
3. Check Network tab:
   - Filter: XHR
   - Should see API calls to localhost:5000
   - Status codes should be 200/201
   - Response should have success: true

Common Issues:
--------------

1. CORS Error:
   - Check backend .env FRONTEND_URL=http://localhost:5173
   - Restart backend server

2. Network Error:
   - Verify backend is running on port 5000
   - Check frontend .env VITE_API_URL

3. MongoDB Connection Error:
   - Ensure MongoDB is running
   - Check MONGODB_URI in backend .env

4. 401 Unauthorized:
   - Token expired or invalid
   - Logout and login again

5. 403 Forbidden:
   - Trying to access admin route as user
   - Check user role

Verifying Data in MongoDB:
---------------------------

1. Open MongoDB Compass or mongosh

2. Connect to: mongodb://localhost:27017

3. Select database: newdayrealty

4. Check collections:
   - users: Should have registered users
   - contacts: Should have contact submissions
   - properties: Will have properties when created

5. Verify data structure matches models

API Testing with Postman:
--------------------------

1. Import: backend/postman_collection.json

2. Test endpoints:
   - Register user
   - Login user
   - Get current user (with token)
   - Submit contact
   - Get properties

3. Save tokens for authenticated requests

Next Step: Create deployment guide
